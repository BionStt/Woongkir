!function(s){"use strict";var r={storeCountry:function(){this.getCountry().length||s.getJSON(woongkir_params.json.country_url,function(i){i.sort(function(i,o){return i.country_name>o.country_name?1:o.country_name>i.country_name?-1:0}),Lockr.set(woongkir_params.json.country_key,i)})},getCountry:function(i,o){var n=Lockr.get(woongkir_params.json.country_key);return n&&void 0!==n?i&&i===Object(i)?this.searchLocation(n,i,o):n:[]},storeProvince:function(){this.getProvince().length||s.getJSON(woongkir_params.json.province_url,function(i){i.sort(function(i,o){return i.province_name>o.province_name?1:o.province_name>i.province_name?-1:0}),Lockr.set(woongkir_params.json.province_key,i)})},getProvince:function(i,o){var n=Lockr.get(woongkir_params.json.province_key);return n&&void 0!==n?i&&i===Object(i)?this.searchLocation(n,i,o):n:[]},storeCity:function(){this.getCity().length||s.getJSON(woongkir_params.json.city_url,function(i){i.sort(function(i,o){return i.city_name>o.city_name?1:o.city_name>i.city_name?-1:0}),Lockr.set(woongkir_params.json.city_key,i)})},getCity:function(i,o){var n=Lockr.get(woongkir_params.json.city_key);return n&&void 0!==n?i&&i===Object(i)?this.searchLocation(n,i,o):n:[]},storeSubdistrict:function(){this.getSubdistrict().length||s.getJSON(woongkir_params.json.subdistrict_url,function(i){i.sort(function(i,o){return i.subdistrict_name>o.subdistrict_name?1:o.subdistrict_name>i.subdistrict_name?-1:0}),Lockr.set(woongkir_params.json.subdistrict_key,i)})},getSubdistrict:function(i,o){var n=Lockr.get(woongkir_params.json.subdistrict_key);return n&&void 0!==n?i&&i===Object(i)?this.searchLocation(n,i,o):n:[]},searchLocation:function(i,o,n){var t=this;switch(n=n||"find"){case"filter":var r=i.filter(function(i){return t.isLocationMatch(i,o)});break;default:r=i.find(function(i){return t.isLocationMatch(i,o)})}return r||!1},isLocationMatch:function(i,o){var n=!0;for(var t in o)i.hasOwnProperty(t)&&String(i[t]).toLowerCase()===String(o[t]).toLowerCase()||(n=!1);return n}};function i(){var i=r.getProvince(),o=r.getCity(),n=r.getSubdistrict(),e=s(".woongkir-account-type").closest("form");if(e.find(".woongkir-account-type").bind("change",function(i){var o=s(i.currentTarget).val(),n=s(i.currentTarget).data("accounts"),t=s(i.currentTarget).data("couriers");for(var r in t){s("#woongkir-couriers-list-"+r).hide();var e=0;for(var c in t[r])-1===t[r][c].account.indexOf(o)?s("#woongkir-courier-box-"+r+"-"+c).hide().find(".woongkir-service").prop("checked",!1):(s("#woongkir-couriers-list-"+r).show(),s("#woongkir-courier-box-"+r+"-"+c).show()),n[o].multiple||(e&&s("#woongkir-courier-box-"+r+"-"+c).find(".woongkir-service").prop("checked",!1),s("#woongkir-courier-box-"+r+"-"+c).find(".woongkir-service.single:checked").length&&e++)}}),e.find(".woongkir-service.bulk").bind("change",function(i){var o=s(this).closest("table"),n=(s(this).closest(".woongkir-couriers-list").data("id"),s(this).closest(".woongkir-courier-box").data("id")),t=e.find(".woongkir-account-type").val(),r=e.find(".woongkir-account-type").data("accounts");e.find(".woongkir-account-type").data("couriers");this.checked?(o.find(".woongkir-service.single").prop("checked",!0),r[t].multiple||e.find(".woongkir-courier-box").not("."+n).find(".woongkir-service").prop("checked",!1)):o.find(".woongkir-service.single").prop("checked",!1)}),e.find(".woongkir-service.single").bind("change",function(i){var o=s(this).closest("table"),n=(s(this).closest(".woongkir-couriers-list").data("id"),s(this).closest(".woongkir-courier-box").data("id")),t=e.find(".woongkir-account-type").val(),r=e.find(".woongkir-account-type").data("accounts");e.find(".woongkir-account-type").data("couriers");this.checked?(o.find(".woongkir-service.bulk").prop({checked:!0}),r[t].multiple||e.find(".woongkir-courier-box").not("."+n).find(".woongkir-service").prop("checked",!1)):o.find(".woongkir-service.single:checked").length||o.find(".woongkir-service.bulk").prop({checked:!1})}),e.find(".woongkir-account-type").trigger("change"),e.find(".woongkir-origin-province-select").empty().append('<option value="">'+woongkir_params.text.select_province+"</option>"),i.length){var t=e.find(".woongkir-origin-province").val();s.each(i,function(i,o){var n='<option value="'+o.province_id+'"';t==o.province_id&&(n+=" selected"),n+=">"+o.province,n+="</option>",e.find(".woongkir-origin-province-select").append(n)})}e.find(".woongkir-origin-province-select").bind("change",function(t){if(e.find(".woongkir-origin-province").val(s(t.currentTarget).val()),e.find(".woongkir-origin-city-select").empty().append('<option value="">'+woongkir_params.text.select_city+"</option>"),o.length){var r=e.find(".woongkir-origin-city").val();s.each(o,function(i,o){if(o.province_id==s(t.currentTarget).val()){var n='<option value="'+o.city_id+'"';r==o.city_id&&(n+=" selected"),n+=">",n+=o.type+" ",n+=o.city_name,n+="</option>",e.find(".woongkir-origin-city-select").append(n)}}),e.find(".woongkir-origin-city-select").trigger("change")}}),e.find(".woongkir-origin-city-select").bind("change",function(t){if(e.find(".woongkir-origin-city").val(s(t.currentTarget).val()),e.find(".woongkir-origin-subdistrict-select").empty().append('<option value="">'+woongkir_params.text.select_subdistrict+"</option>"),n.length){var r=e.find(".woongkir-origin-subdistrict").val();s.each(n,function(i,o){if(o.city_id==s(t.currentTarget).val()){var n='<option value="'+o.subdistrict_id+'"';r==o.subdistrict_id&&(n+=" selected"),n+=">"+o.subdistrict_name,n+="</option>",e.find(".woongkir-origin-subdistrict-select").append(n)}}),e.find(".woongkir-origin-subdistrict-select").trigger("change")}}),e.find(".woongkir-origin-subdistrict-select").bind("change",function(i){e.find(".woongkir-origin-subdistrict").val(s(i.currentTarget).val())}),e.find(".woongkir-origin-province-select").trigger("change")}r.storeCountry(),r.storeProvince(),r.storeCity(),r.storeSubdistrict(),s(document).ready(function(){s(document).on("click",".wc-shipping-zone-method-settings",i),woongkir_params.show_settings&&setTimeout(function(){for(var i=!1,o=s(document).find(".wc-shipping-zone-method-type"),n=0;n<o.length;n++){var t=o[n];if(s(t).text()==woongkir_params.method_title)return s(t).closest("tr").find(".row-actions .wc-shipping-zone-method-settings").trigger("click"),void(i=!0)}i||(s(".wc-shipping-zone-add-method").trigger("click"),s("select[name='add_method_id']").val(woongkir_params.method_id).trigger("change"))},300)})}(jQuery);