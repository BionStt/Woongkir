!function(s){"use strict";function o(){var i=Lockr.get(woongkir_params.json.province_key);return void 0!==i&&"undefined"!=i&&i?i:[]}function r(){var i=Lockr.get(woongkir_params.json.city_key);return void 0!==i&&"undefined"!=i&&i?i:[]}function c(){var i=Lockr.get(woongkir_params.json.subdistrict_key);return void 0!==i&&"undefined"!=i&&i?i:[]}function i(){var i=o(),n=r(),t=(c(),s(".woongkir-account-type").closest("form"));if(t.find(".woongkir-account-type").bind("change",function(i){var n=s(i.currentTarget).val(),o=s(i.currentTarget).data("accounts"),e=s(i.currentTarget).data("couriers");for(var r in e){s("#woongkir-couriers-list-"+r).hide();var t=0;for(var c in e[r])-1===e[r][c].account.indexOf(n)?s("#woongkir-courier-box-"+r+"-"+c).hide().find(".woongkir-service").prop("checked",!1):(s("#woongkir-couriers-list-"+r).show(),s("#woongkir-courier-box-"+r+"-"+c).show()),o[n].multiple||(t&&s("#woongkir-courier-box-"+r+"-"+c).find(".woongkir-service").prop("checked",!1),s("#woongkir-courier-box-"+r+"-"+c).find(".woongkir-service.single:checked").length&&t++)}}),t.find(".woongkir-service.bulk").bind("change",function(i){var n=s(this).closest("table"),o=(s(this).closest(".woongkir-couriers-list").data("id"),s(this).closest(".woongkir-courier-box").data("id")),e=t.find(".woongkir-account-type").val(),r=t.find(".woongkir-account-type").data("accounts");t.find(".woongkir-account-type").data("couriers");this.checked?(n.find(".woongkir-service.single").prop("checked",!0),r[e].multiple||t.find(".woongkir-courier-box").not("."+o).find(".woongkir-service").prop("checked",!1)):n.find(".woongkir-service.single").prop("checked",!1)}),t.find(".woongkir-service.single").bind("change",function(i){var n=s(this).closest("table"),o=(s(this).closest(".woongkir-couriers-list").data("id"),s(this).closest(".woongkir-courier-box").data("id")),e=t.find(".woongkir-account-type").val(),r=t.find(".woongkir-account-type").data("accounts");t.find(".woongkir-account-type").data("couriers");this.checked?(n.find(".woongkir-service.bulk").prop({checked:!0}),r[e].multiple||t.find(".woongkir-courier-box").not("."+o).find(".woongkir-service").prop("checked",!1)):n.find(".woongkir-service.single:checked").length||n.find(".woongkir-service.bulk").prop({checked:!1})}),t.find(".woongkir-account-type").trigger("change"),t.find(".woongkir-origin-province-select").empty().append('<option value="">'+woongkir_params.text.select_province+"</option>"),i.length){var e=t.find(".woongkir-origin-province").val();s.each(i,function(i,n){var o='<option value="'+n.province_id+'"';e==n.province_id&&(o+=" selected"),o+=">"+n.province,o+="</option>",t.find(".woongkir-origin-province-select").append(o)})}t.find(".woongkir-origin-province-select").bind("change",function(e){if(t.find(".woongkir-origin-province").val(s(e.currentTarget).val()),t.find(".woongkir-origin-city-select").empty().append('<option value="">'+woongkir_params.text.select_city+"</option>"),n.length){var r=t.find(".woongkir-origin-city").val();s.each(n,function(i,n){if(n.province_id==s(e.currentTarget).val()){var o='<option value="'+n.city_id+'"';r==n.city_id&&(o+=" selected"),o+=">",o+=n.type+" ",o+=n.city_name,o+="</option>",t.find(".woongkir-origin-city-select").append(o)}}),t.find(".woongkir-origin-city-select").trigger("change")}}),t.find(".woongkir-origin-city-select").bind("change",function(e){t.find(".woongkir-origin-city").val(s(e.currentTarget).val()),t.find(".woongkir-origin-subdistrict-select").empty().append('<option value="">'+woongkir_params.text.select_subdistrict+"</option>");var i=c();if(i.length){var r=t.find(".woongkir-origin-subdistrict").val();s.each(i,function(i,n){if(n.city_id==s(e.currentTarget).val()){var o='<option value="'+n.subdistrict_id+'"';r==n.subdistrict_id&&(o+=" selected"),o+=">"+n.subdistrict_name,o+="</option>",t.find(".woongkir-origin-subdistrict-select").append(o)}}),t.find(".woongkir-origin-subdistrict-select").trigger("change")}}),t.find(".woongkir-origin-subdistrict-select").bind("change",function(i){t.find(".woongkir-origin-subdistrict").val(s(i.currentTarget).val())}),t.find(".woongkir-origin-province-select").trigger("change")}o().length||s.getJSON(woongkir_params.json.province_url,function(i){i.sort(function(i,n){return i.province_name>n.province_name?1:n.province_name>i.province_name?-1:0}),Lockr.set(woongkir_params.json.province_key,i)}),r().length||s.getJSON(woongkir_params.json.city_url,function(i){i.sort(function(i,n){return i.city_name>n.city_name?1:n.city_name>i.city_name?-1:0}),Lockr.set(woongkir_params.json.city_key,i)}),c().length||s.getJSON(woongkir_params.json.subdistrict_url,function(i){i.sort(function(i,n){return i.subdistrict_name>n.subdistrict_name?1:n.subdistrict_name>i.subdistrict_name?-1:0}),Lockr.set(woongkir_params.json.subdistrict_key,i)}),s(document).ready(function(){s(document).on("click",".wc-shipping-zone-method-settings",i),woongkir_params.show_settings&&setTimeout(function(){for(var i=!1,n=s(document).find(".wc-shipping-zone-method-type"),o=0;o<n.length;o++){var e=n[o];if(s(e).text()==woongkir_params.method_title)return s(e).closest("tr").find(".row-actions .wc-shipping-zone-method-settings").trigger("click"),void(i=!0)}i||(s(".wc-shipping-zone-add-method").trigger("click"),s("select[name='add_method_id']").val(woongkir_params.method_id).trigger("change"))},300)})}(jQuery);