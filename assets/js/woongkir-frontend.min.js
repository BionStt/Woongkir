!function(h){"use strict";function m(){var t=Lockr.get(woongkir_params.json.province_key);return void 0!==t&&"undefined"!=t&&t?t:[]}function f(){var t=Lockr.get(woongkir_params.json.city_key);return void 0!==t&&"undefined"!=t&&t?t:[]}function y(){var t=Lockr.get(woongkir_params.json.subdistrict_key);return void 0!==t&&"undefined"!=t&&t?t:[]}m().length||h.getJSON(woongkir_params.json.province_url,function(t){t.sort(function(t,e){return t.province_name>e.province_name?1:e.province_name>t.province_name?-1:0}),Lockr.set(woongkir_params.json.province_key,t)}),f().length||h.getJSON(woongkir_params.json.city_url,function(t){t.sort(function(t,e){return t.city_name>e.city_name?1:e.city_name>t.city_name?-1:0}),Lockr.set(woongkir_params.json.city_key,t)}),y().length||h.getJSON(woongkir_params.json.subdistrict_url,function(t){t.sort(function(t,e){return t.subdistrict_name>e.subdistrict_name?1:e.subdistrict_name>t.subdistrict_name?-1:0}),Lockr.set(woongkir_params.json.subdistrict_key,t)}),h(document).ready(function(){h(document.body).on("country_to_state_changed",function(t,e,i){!function(t,a){if(void 0!==t&&"undefined"!=t&&t&&void 0!==a&&"undefined"!=a&&a){var o=a.find("#billing_state, #shipping_state, #calc_shipping_state"),r=a.find("#billing_city, #shipping_city, #calc_shipping_city"),e=r.parent(),s=r.val(),d=r.attr("name"),p=r.attr("id"),i=r.attr("placeholder")||r.attr("data-placeholder")||"",_=a.find("#billing_address_2, #shipping_address_2"),n=_.parent(),l=_.val(),u=_.attr("name"),g=_.attr("id"),c=_.attr("placeholder")||_.attr("data-placeholder")||"";"ID"===t?(o.bind("change",function(){r.unbind("change"),r.is("input")&&(r.replaceWith('<select name="'+d+'" id="'+p+'" class="city_select" data-placeholder="'+woongkir_params.text.select_city+'"></select>'),r=a.find("#billing_city, #shipping_city, #calc_shipping_city")),r.empty().append('<option value="">'+woongkir_params.text.select_city+"</option>");var i=o.val(),n=0,t=m();t&&h.each(t,function(t,e){e.code!=i||(n=e.province_id)});var e=f(),c="";e&&h.each(e,function(t,e){if(e.province_id==n){var i=(c=e.type+" "+e.city_name)===s?" selected":"";r.append('<option value="'+c+'" '+i+">"+c+"</option>")}}),h().select2&&r.select2({placeholderOption:"first",placeholder:woongkir_params.text.select_city,width:"100%"}),r.bind("change",function(){if(_.length){_.is("input")&&(_.replaceWith('<select name="'+u+'" id="'+g+'" class="subdistrict_select" data-placeholder="'+woongkir_params.text.select_subdistrict+'"></select>'),_=a.find("#billing_address_2, #shipping_address_2")),_.empty().append('<option value="">'+woongkir_params.text.select_subdistrict+"</option>");var n=0,t=f();if(t&&h.each(t,function(t,e){e.type+" "+e.city_name!=r.val()||(n=e.city_id)}),n){var e=y();e&&h.each(e,function(t,e){if(e.city_id==n){var i=e.subdistrict_name===l?" selected":"";_.append('<option value="'+e.subdistrict_name+'" '+i+">"+e.subdistrict_name+"</option>")}})}h().select2&&_.select2({placeholderOption:"first",placeholder:woongkir_params.text.select_subdistrict,width:"100%"})}}),h(function(){r.change()})}),h(function(){o.change()})):(r.is("select")&&(e.show().find(".select2-container").remove(),r.replaceWith('<input type="text" class="input-text" name="'+d+'" id="'+p+'" placeholder="'+i+'" />'),r=a.find("#billing_city, #shipping_city, #calc_shipping_city")),_.is("select")&&(n.show().find(".select2-container").remove(),_.replaceWith('<input type="text" class="input-text" name="'+u+'" id="'+g+'" placeholder="'+c+'" />'),_=a.find("#billing_address_2, #shipping_address_2")))}}(e,i)}),h(document.body).on("updated_wc_div",function(t){h(":input.country_to_state").change()}),h(document.body).on("updated_shipping_method",function(t){h(":input.country_to_state").change()})})}(jQuery);